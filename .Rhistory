list.files()
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
# supplemental data
glimpse(df)
?spread
# supplemental data
df_wide <- df %>%
spread(timestamp, metric)
ids
ids <- 1:unique(timestamp)
ids
ids <- 1:unique(df$timestamp)
ids
glimpse(df)
ids <- 1:length(unique(df$timestamp))
ids
# supplemental data
df_wide <- df %>%
mutate(id = plyr::mapvalues(timestamp, from = unique(timestamp), to = ids))
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
# supplemental data
df_wide <- df %>%
mutate(id = plyr::mapvalues(timestamp, from = unique(timestamp), to = ids))
unique(df$timestamp)
timestamps <- unique(df$timestamp)
# supplemental data
df_wide <- df %>%
mutate(id = plyr::mapvalues(timestamp, from = timestamps, to = ids))
# supplemental data
df_wide <- df %>%
mutate(id = as.character(timestamp))
glimpse(df_wide)
# supplemental data
df_wide <- df %>%
mutate(id = as.character(timestamp)) %>%
mutate(id = plyr::mapvalues(id, from = timestamps, to = ids))
glimpse(df_wide)
ids
timestamps
df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids))
df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
glimpse(df_wide)
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
# supplemental data
df_wide <- df %>%
mutate(id = as.character(timestamp))
df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
glimpse(df_wide)
df_wide <- df_wide %>%
spread(id)
df_wide <- df_wide %>%
spread(id, metric)
substr(df_wide$metric)
?substr
substr(df_wide$metric, nchar(df_wide$metric))
substr(df_wide$metric, nchar(df_wide$metric), nchar(df_wide$metric))
# supplemental data
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = substr(metric, nchar(metric), nchar(metric)))
glimpse(df_wide)
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
# supplemental data
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = substr(metric, nchar(metric), nchar(metric))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1))
df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
df_wide <- df_wide %>%
spread(id, metric)
glimpse(df_wide)
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
# supplemental data
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = substr(metric, nchar(metric), nchar(metric))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1))
df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
df_wide <- df_wide %>%
spread(metric)
stocks <- data.frame(
time = as.Date('2009-01-01') + 0:9,
X = rnorm(10, 0, 1),
Y = rnorm(10, 0, 2),
Z = rnorm(10, 0, 4)
)
stocksm <- stocks %>% gather(stock, price, -time)
stocksm
df_wide <- df_wide %>%
spread(metric, value)
df_wide
View(df_wide)
head(df_wide$details)
df_wide <- df_wide %>%
spread(metric, value) %>%
separate(details, c('map', 'gametype', 'time', 'match_id'), '/'))
df_wide <- df_wide %>%
spread(metric, value) %>%
separate(details, c('map', 'gametype', 'time', 'match_id'), '/')
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
# supplemental data
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = substr(metric, nchar(metric), nchar(metric))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1))
#df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
df_wide <- df_wide %>%
spread(metric, value) %>%
separate(details, c('map', 'gametype', 'time', 'match_id'), '/')
glimpse(df_wide)
View(df_wide)
unique(df_wide$time)
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
# supplemental data
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = substr(metric, nchar(metric), nchar(metric))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1))
#df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
df_wide <- df_wide %>%
spread(metric, value) %>%
separate(details, c('map', 'gametype', 'time', 'match_id'), ' / ')
unique(df_wide$time)
unique(df_wide$gametype)
unique(df_wide$map)
df_wide$kda %>% head
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
# supplemental data
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = substr(metric, nchar(metric), nchar(metric))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1))
#df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
df_wide <- df_wide %>%
spread(metric, value) %>%
separate(details, c('map', 'gametype', 'time', 'match_id'), ' / ') %>%
separate(kda, c('kills', 'deaths', 'assists'), '/')
glimpse(df_wide)
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = as.numeric(substr(metric, nchar(metric), nchar(metric)))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1))
glimpse(df_wide)
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
# create match observation id
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = as.numeric(substr(metric, nchar(metric), nchar(metric)))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1))
#df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
df_wide <- df_wide %>%
spread(metric, value) %>%
separate(details, c('map', 'gametype', 'time', 'match_id'), ' / ') %>%
separate(kda, c('kills', 'deaths', 'assists'), '/') %>%
mutate(damage = as.numeric(gsub(',', '', damage)),
healing = as.numeric(gsub(',', '', healing)),
kills = as.numeric(kills),
assists = as.numeric(assists),
deaths = as.numeric(deaths))
glimpse(df_wide)
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
# create match observation id
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = substr(metric, nchar(metric), nchar(metric))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1))
#df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
df_wide <- df_wide %>%
spread(metric, value) %>%
separate(details, c('map', 'gametype', 'time', 'match_id'), ' / ') %>%
separate(kda, c('kills', 'deaths', 'assists'), '/') %>%
mutate(damage = as.integer(gsub(',', '', damage)),
healing = as.integer(gsub(',', '', healing)),
kills = as.integer(kills),
assists = as.integer(assists),
deaths = as.integer(deaths))
glimpse(df_wide)
unique(df_wide)
unique(df_wide$player_num
)
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = as.integer(substr(metric, nchar(metric), nchar(metric)))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1),
team = ifelse(player_num %in% 0:4, 'blue', 'red'))
glimpse(df_wide)
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
# create match observation id
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = as.integer(substr(metric, nchar(metric), nchar(metric)))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1),
team = ifelse(player_num %in% 0:4, 'blue', 'red'))
#df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
df_wide <- df_wide %>%
spread(metric, value) %>%
separate(details, c('map', 'gametype', 'time', 'match_id'), ' / ') %>%
separate(kda, c('kills', 'deaths', 'assists'), '/') %>%
mutate(damage = as.integer(gsub(',', '', damage)),
healing = as.integer(gsub(',', '', healing)),
kills = as.integer(kills),
assists = as.integer(assists),
deaths = as.integer(deaths))
glimpse(df_wide)
match_df <- df_wide %>%
select(-damage, -healing, -assists, -kills, -deaths)
glimpse(match_df)
match_df <- df_wide %>%
select(healing, damage, map, outcome, time, team)
glimpse(match_df)
match_df <- df_wide %>%
select(map, outcome, time, team,
healing, damage, kills, deaths, assists)
match_df <- df_wide %>%
select(map, outcome, time, team,
healing, damage, kills, deaths, assists)
glimpse(match_df)
?gather
match_df <- df_wide %>%
select(id, map, outcome, time, team,
healing, damage, kills, deaths, assists)
glimpse(match_id)
glimpse(match_id)
glimpse(match_df)
library(tidyverse)
library(reshape2)
df <- read_csv('D:/Projects/Paladins/Palastats/AllData_Long.csv')
# create match observation id
timestamps <- as.character(unique(df$timestamp))
ids <- 1:length(timestamps)
df_wide <- df %>%
mutate(id = as.character(timestamp),
player_num = as.integer(substr(metric, nchar(metric), nchar(metric)))) %>%
mutate(metric = substr(metric, 0, nchar(metric)-1),
team = ifelse(player_num %in% 0:4, 'blue', 'red'))
df_wide <- df_wide %>%
spread(metric, value) %>%
separate(details, c('map', 'gametype', 'time', 'match_id'), ' / ') %>%
separate(kda, c('kills', 'deaths', 'assists'), '/') %>%
mutate(damage = as.integer(gsub(',', '', damage)),
healing = as.integer(gsub(',', '', healing)),
kills = as.integer(kills),
assists = as.integer(assists),
deaths = as.integer(deaths))
df_wide$id <- plyr::mapvalues(df_wide$id, from = timestamps, to = ids)
match_df <- df_wide %>%
select(id, map, outcome, time, team,
healing, damage, kills, deaths, assists)
glimpse(match_df)
match_df <- df_wide %>%
select(id, map, outcome, time, team,
healing, damage, kills, deaths, assists) %>%
spread(team, value)
match_df <- df_wide %>%
select(id, map, outcome, time, team,
healing, damage, kills, deaths, assists) %>%
spread(team)
match_df2 <- match_df %>%
select(outcome, id, team, deaths)
glimpse(match_df2)
match_df2 <- match_df %>%
select(outcome, id, team, deaths) %>%
group_bY(outcome, id, team) %>%
summarise_all(funs(sum))
match_df2 <- match_df %>%
select(outcome, id, team, deaths) %>%
group_by(outcome, id, team) %>%
summarise_all(funs(sum))
glimpse(match_df2)
match_df$deaths[is.na(match_df$deaths)]
match_df$deaths[is.na(match_df$deaths)] <- 0
match_df2 <- match_df %>%
select(outcome, id, team, deaths) %>%
group_by(outcome, id, team) %>%
summarise_all(funs(sum))
glimpse(match_df2)
match_df2 <- match_df %>%
select(outcome, id, team, deaths) %>%
group_by(outcome, id, team) %>%
summarise_all(funs(sum)) %>%
spread(team, deaths)
glimpse(match_df2)
match_df2 %>%
ggplot(aes(x=blue, y=red, colour=outcome)) +
geom_point(size=2)
match_df2 %>%
filter(blue < 100) %>%
ggplot(aes(x=red, y=blue, colour=outcome)) +
geom_point(size=2)
match_df2 %>%
filter(blue < 100) %>%
ggplot(aes(x=red, y=blue, colour=outcome)) +
geom_point(size=2) +
geom_abline(0)
match_df2 %>%
filter(blue < 100) %>%
ggplot(aes(x=red, y=blue, colour=outcome)) +
geom_point(size=2) +
geom_abline(intercept=0)
match_df2 %>%
filter(blue < 100) %>%
ggplot(aes(x=red, y=blue, colour=outcome)) +
geom_point(size=2) +
geom_abline(intercept=0) +
xlab('Red Team Deaths') +
ylab('Blue Team Deaths')
match_df2 <- match_df %>%
select(outcome, id, team, kills) %>%
group_by(outcome, id, team) %>%
summarise_all(funs(sum)) %>%
spread(team, kills)
match_df2 %>%
filter(blue < 100) %>%
ggplot(aes(x=red, y=blue, colour=outcome)) +
geom_point(size=2) +
geom_abline(intercept=0) +
xlab('Red Team Deaths') +
ylab('Blue Team Deaths')
match_df2 <- match_df %>%
select(outcome, id, team, deaths) %>%
group_by(outcome, id, team) %>%
summarise_all(funs(sum)) %>%
spread(team, deaths)
match_df2 %>%
filter(blue < 100) %>%
ggplot(aes(x=red, y=blue, colour=outcome)) +
geom_point(size=2) +
geom_abline(intercept=0) +
xlab('Red Team Deaths') +
ylab('Blue Team Deaths')
match_df2 %>%
filter(blue < 100) %>%
mutate(outcome = ifelse(outcome=='VICTORY', 'Blue Win', 'Red Win')) %>%
ggplot(aes(x=red, y=blue, colour=outcome)) +
geom_point(size=2) +
geom_abline(intercept=0) +
xlab('Red Team Deaths') +
ylab('Blue Team Deaths') +
match_df2 %>%
filter(blue < 100) %>%
mutate(outcome = ifelse(outcome=='VICTORY', 'Blue Win', 'Red Win')) %>%
ggplot(aes(x=red, y=blue, colour=outcome)) +
geom_point(size=2) +
geom_abline(intercept=0) +
xlab('Red Team Deaths') +
ylab('Blue Team Deaths')
